{"ast":null,"code":"import _objectSpread from \"/home/rhm101/code/RhysMalyon/polaris-form/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"/home/rhm101/code/RhysMalyon/polaris-form/src/userContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from \"react\";\nimport userData from \"./data/lunarisData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar UserContext = /*#__PURE__*/createContext();\n\nfunction UserContextProvider({\n  children\n}) {\n  _s();\n\n  var [authUser, setAuthUser] = useState({});\n  var [isEditing, setIsEditing] = useState(false);\n  var [error, setError] = useState(null);\n  var [isLoading, setIsLoading] = useState(false);\n  var [message, setMessage] = useState('Editing Info');\n  var invalid = !authUser.first_name || !authUser.last_name || !authUser.gender || !authUser.birthday || !authUser.address;\n  useEffect(() => {\n    var isCurrent = true;\n\n    if (isCurrent) {\n      setAuthUser(user);\n\n      if (JSON.parse(localStorage.getItem('authUser'))) {\n        setAuthUser(JSON.parse(localStorage.getItem('authUser')));\n      }\n    } else {\n      localStorage.removeItem('authUser');\n      setAuthUser(null);\n    }\n\n    return () => {\n      isCurrent = false;\n    };\n  }, []);\n\n  var handleFirstNameChange = value => {\n    var firstName = value.charAt(0).toUpperCase() + value.slice(1);\n    setAuthUser(_objectSpread(_objectSpread({}, authUser), {}, {\n      first_name: firstName\n    }));\n  };\n\n  var handleLastNameChange = value => {\n    var lastName = value.charAt(0).toUpperCase() + value.slice(1);\n    setAuthUser(_objectSpread(_objectSpread({}, authUser), {}, {\n      last_name: lastName\n    }));\n  };\n\n  var handleGenderChange = value => {\n    setAuthUser(_objectSpread(_objectSpread({}, authUser), {}, {\n      gender: value\n    }));\n  };\n\n  var handleBirthdayChange = value => {\n    var numOnly = /^[0-9\\b]+$/;\n\n    if (numOnly.test(value)) {\n      var bday = value.replace(/(\\d{4})(\\d{2})(\\d{2})/, \"$1-$2-$3\");\n      setAuthUser(_objectSpread(_objectSpread({}, authUser), {}, {\n        birthday: bday\n      }));\n    }\n  };\n\n  var handleAddressChange = value => {\n    setAuthUser(_objectSpread(_objectSpread({}, authUser), {}, {\n      address: value\n    }));\n  };\n\n  var handleSubmit = () => {\n    if (invalid) {\n      console.log('fill in the form');\n      setError('Please complete the form or cancel your edit');\n    } else {\n      localStorage.setItem('authUser', JSON.stringify(authUser));\n      setAuthUser(JSON.parse(localStorage.getItem('authUser')));\n      console.log(authUser);\n      setIsLoading(true);\n      setMessage('Edited!');\n      setTimeout(() => {\n        setIsLoading(false);\n        setMessage('Editing Info');\n        setIsEditing(false);\n      }, 350);\n    }\n  };\n\n  var handleCancel = () => {\n    if (JSON.parse(localStorage.getItem('authUser'))) {\n      setAuthUser(JSON.parse(localStorage.getItem('authUser')));\n    } else {\n      setAuthUser(user);\n    }\n\n    setIsEditing(false);\n    setError(null);\n  };\n\n  var genderOptions = [{\n    label: \"Decline to Answer\",\n    value: \"Decline to Answer\"\n  }, {\n    label: \"Female\",\n    value: \"Female\"\n  }, {\n    label: \"Male\",\n    value: \"Male\"\n  }];\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      authUser,\n      setAuthUser,\n      isEditing,\n      setIsEditing,\n      error,\n      setError,\n      invalid,\n      handleFirstNameChange,\n      handleLastNameChange,\n      handleGenderChange,\n      handleBirthdayChange,\n      handleAddressChange,\n      handleSubmit,\n      handleCancel,\n      genderOptions,\n      isLoading,\n      message\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}\n\n_s(UserContextProvider, \"ynxZxuCoNqIUWY15M/QX+U40C/I=\");\n\n_c = UserContextProvider;\nexport { UserContext, UserContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"UserContextProvider\");","map":{"version":3,"sources":["/home/rhm101/code/RhysMalyon/polaris-form/src/userContext.js"],"names":["createContext","useState","useEffect","userData","UserContext","UserContextProvider","children","authUser","setAuthUser","isEditing","setIsEditing","error","setError","isLoading","setIsLoading","message","setMessage","invalid","first_name","last_name","gender","birthday","address","isCurrent","user","JSON","parse","localStorage","getItem","removeItem","handleFirstNameChange","value","firstName","charAt","toUpperCase","slice","handleLastNameChange","lastName","handleGenderChange","handleBirthdayChange","numOnly","test","bday","replace","handleAddressChange","handleSubmit","console","log","setItem","stringify","setTimeout","handleCancel","genderOptions","label"],"mappings":"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","sourcesContent":["import { createContext, useState, useEffect } from \"react\";\nimport userData from \"./data/lunarisData\";\n\nconst UserContext = createContext();\n\nfunction UserContextProvider({children}) {\n    const [authUser, setAuthUser] = useState({});\n    const [isEditing, setIsEditing] = useState(false);\n    const [error, setError] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [message, setMessage] = useState('Editing Info')\n    \n\n    let invalid = !authUser.first_name || !authUser.last_name || !authUser.gender || !authUser.birthday || !authUser.address;\n\n    useEffect(() => {\n        let isCurrent = true;\n        if(isCurrent) {\n            setAuthUser(user);\n            if(JSON.parse(localStorage.getItem('authUser'))) {\n                setAuthUser(JSON.parse(localStorage.getItem('authUser')))\n            }\n        }\n        else {\n            localStorage.removeItem('authUser');\n            setAuthUser(null);\n        }\n        return () => {\n            isCurrent = false;\n        }\n    }, [])\n\n    const handleFirstNameChange = value => {\n        const firstName = value.charAt(0).toUpperCase() + value.slice(1);\n        setAuthUser({...authUser, first_name: firstName});\n    }\n    const handleLastNameChange = value => {\n        const lastName = value.charAt(0).toUpperCase() + value.slice(1);\n        setAuthUser({...authUser, last_name: lastName});\n    }\n    const handleGenderChange = value => {\n        setAuthUser({...authUser, gender: value});\n    }\n    const handleBirthdayChange = value => {\n        const numOnly = /^[0-9\\b]+$/;\n        if(numOnly.test(value)) {\n            let bday = value.replace(/(\\d{4})(\\d{2})(\\d{2})/, \"$1-$2-$3\")\n            setAuthUser({...authUser, birthday: bday});\n        }\n    }\n    const handleAddressChange = value => {\n        setAuthUser({...authUser, address: value});\n    }\n\n    const handleSubmit = () => {\n        if(invalid) {\n            console.log('fill in the form');\n            setError('Please complete the form or cancel your edit');\n        } else {\n            localStorage.setItem('authUser', JSON.stringify(authUser));\n            setAuthUser(JSON.parse(localStorage.getItem('authUser')));\n            console.log(authUser)\n            setIsLoading(true)\n            setMessage('Edited!')\n            setTimeout(() => {\n                setIsLoading(false);\n                setMessage('Editing Info')\n                setIsEditing(false);\n            }, 350)\n        }\n    }\n    const handleCancel = () => {\n        if(JSON.parse(localStorage.getItem('authUser'))) {\n            setAuthUser(JSON.parse(localStorage.getItem('authUser')))\n        } else {\n            setAuthUser(user);\n        }\n        setIsEditing(false);\n        setError(null)\n    }\n\n    const genderOptions = [\n        {label: \"Decline to Answer\", value: \"Decline to Answer\"},\n        {label: \"Female\", value: \"Female\"},\n        {label: \"Male\", value: \"Male\"},\n    ]\n\n    return (\n        <UserContext.Provider value={{\n            authUser,\n            setAuthUser,\n            isEditing,\n            setIsEditing,\n            error,\n            setError,\n            invalid,\n            handleFirstNameChange,\n            handleLastNameChange,\n            handleGenderChange,\n            handleBirthdayChange,\n            handleAddressChange,\n            handleSubmit,\n            handleCancel,\n            genderOptions,\n            isLoading,\n            message\n        }}>\n            {children}\n        </UserContext.Provider>\n    )\n\n}\n\nexport { UserContext, UserContextProvider}\n"]},"metadata":{},"sourceType":"module"}